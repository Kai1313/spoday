function setCaretPosition(e,t){let n=document.getElementById(e);if(null!=n)if(n.createTextRange){let e=n.createTextRange();e.move("character",t),e.select()}else n.selectionStart?(n.focus(),n.setSelectionRange(t,t)):n.focus()}function getSelectionStart(e){if(e.createTextRange){let t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""==t.text?e.value.length:e.value.lastIndexOf(t.text)}return e.selectionStart}function removePeriod(e,t){if(""!=e){tamp=e.split(t),e="";for(let t=0;t<tamp.length;t++)e+=tamp[t]}return e}function addPeriodType(e,t=","){e+="",e=removePeriod(e,t),e+="",x=e.split(t),x1=x[0],x2=x.length>1?t+x[1]:"";let n=/(\d+)(\d{3})/;for(;n.test(x1);)x1=x1.replace(n,"$1"+t+"$2");return x1+x2}function removePeriod(e,t){if(""!=e){tamp=e.split(t),e="";for(let t=0;t<tamp.length;t++)e+=tamp[t]}return e}function addPeriod(e,t){let n;e+="",e=removePeriod(e,t),e+="";let o=e.split(".");o.length>1?(n=o[1],e=o[0]):n="00",e+="",x=e.split(t),x1=x[0],x2=x.length>1?t+x[1]:"";let r=/(\d+)(\d{3})/;for(;r.test(x1);)x1=x1.replace(r,"$1"+t+"$2");return x1+x2+"."+n}function formatUang(e,t,n,o){let r=e.split(".");if(r.length>1){r[1]}else{}let l=r[0],i=l,a=i.length,c=1,d="";if(1==o){for(let e=a-1;e>=0;e--)(c-1)%3==0&&c-1>0&&(d+=","),d+=i[e],c+=1;a=d.length,i="";for(let e=a-1;e>=0;e--)i+=d[e];i+="."+desimalText}else{for(let e=a-1;e>=0;e--)(c-1)%3==0&&c-1>0&&(d+="."),d+=i[e],c+=1;a=d.length,i="";for(let e=a-1;e>=0;e--)i+=d[e]}return 1==t?n+" "+i:i+" "+n}$(document).ready(function(){$(document).on("keyup",".gii-money",function(e){if((e.keyCode<37||e.keyCode>40)&&9!=e.keyCode){let e=$(this).attr("id"),t=getSelectionStart(document.getElementById(e)),n=document.getElementById(e).value,o=addPeriodType(n),r=n.length,l=o.length;r-l==1?t--:l-r==1&&t++,document.getElementById(e).value=o,setCaretPosition(e,t)}}),$(document).on("keypress",".gii-numeric-only",function(e){return 9==e.keyCode&&$(this).select(),e.charCode>=48&&e.charCode<=57||0==e.charCode}),$(document).on("keypress",".gii-numeric-decimal-only",function(e){return 9==e.keyCode&&$(this).select(),e.charCode>=48&&e.charCode<=57||0==e.charCode||46==e.charCode}),$(document).on("blur",".gii-numeric-decimal-only",function(e){if(""!=$(this).val()){let e=removePeriod($(this).val(),","),t=parseFloat(e);"undefined"!=typeof default_value_price&&default_value_price&&(t=t.toFixed(default_value_price)),$(this).val(addPeriod(t,","))}9==e.keyCode&&$(this).select()}),$(document).on("keypress",".gii-numeric-minus-only",function(e){return e.charCode>=48&&e.charCode<=57||0==e.charCode||45==e.charCode})});